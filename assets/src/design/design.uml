@startuml

/'
1) We create a GeoGridConfig by passing a config file containing the filename of the households, cities and commutes csv files.
2) We create a GeoGrid by passing the created GeoGridConfig to the constructor of GeoGrid.
3) This method requests the necessary information from the GeoGridConfig.
'/

class CitiesReader {
	{static} + getLocationsFromCSV(locations_csv: Stream) : List<Locations>
}
class CommutesReader {
	{static} + getCommutesFromCSV(commute_csv: Stream) : Map<City, Map<City, Integer>>
}
class HouseholdsReader {
	{static} + getHouseholdsFromCSV(household_csv: Stream) : List<Household>
}

' This holds all info needed to generate a specific geogrid
class GeoGridConfig {
	+ GeoGridConfig(config_csv)
	+ getHouseholds() : List<Houshold>
	+ getCities() : List<City>
	+ getCommute() : Map<City, Map<City, Integer>>
	- parseCities(input_file : csv)
	- parseHouseholds(input_file : csv)
	- parseCommute(input_file : csv)
}

class GeoGrid {
	+ GeoGrid(config : GeoGridConfig)
}

class Community {
    + getPoolSize(): integer 
    + getCapacity(): integer
    + addHousehold(household: Household)    
}

class PrimaryCommunity {

}

class SecondaryCommunity {

}

class School {
    + getPoolSize(): integer 
    + getCapacity(): integer
}

class HighSchool {
    + getPoolSize(): integer 
    + getCapacity(): integer
}

class Workplace {
    + getPoolSize(): integer 
    + getCapacity(): integer
}

class ContactPool {
    people: List<Person>
}

class Institute {
    - pools: List<ContactPool>
    + getPoolSize(): integer 
}

class Cluster {
    + getCapacity(): integer
	- capacity: integer
	- capacityUsed : integer
}

class Location {
	- id : integer
	- name : String
	- province : String
    - institutes: List<Institute>
}

class Household {
    ' PoolSize == Capacity
    + getPoolSize(): integer 
    + getCapacity(): integer
}

class Coordinate {
	longitude : double 
	latitude : double 
}

class GeoGridReader {
    + write(grid : GeoGrid, output_stream : Stream)
}

class GeoGridWriter {
    + read(input_stream: Stream) : GeoGrid
}

class GeoGridJSONWriter {
    + read(input_stream: Stream) : GeoGrid
}

class GeoGridJSONReader {
    + write(grid : GeoGrid, output_stream : Stream)
}

class Person {
    
}

School --|> Institute
HighSchool --|> Institute 
Workplace --|> Institute 
Community --|> Institute
Household --|> Institute

Institute --|> Cluster
ContactPool --|> Cluster

Location o-- Institute
ContactPool o-- Person

PrimaryCommunity --|> Community
SecondaryCommunity --|> Community

GeoGridJSONReader --|> GeoGridReader
GeoGridJSONWriter --|> GeoGridWriter

GeoGrid o-- Location

Institute o-- ContactPool

Coordinate --o Location
@enduml
